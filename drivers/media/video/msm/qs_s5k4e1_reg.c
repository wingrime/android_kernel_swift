/* Copyright (c) 2011, Code Aurora Forum. All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 and
 * only version 2 as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
 * 02110-1301, USA.
 *
 */


#include "qs_s5k4e1.h"

struct qs_s5k4e1_i2c_reg_conf qs_s5k4e1_prev_settings_3d[] = {
	{0x0100, 0x00},
	/*Frame Length*/
	{0x0340, 0x04},
	{0x0341, 0xB4},
	/*Line Length*/
	{0x0342, 0x0A},
	{0x0343, 0xB2},
	{0x3030, 0x06},
	{0x301B, 0x75},
	{0x30BC, 0xB0},
	{0x301C, 0x04},
	{0x0202, 0x04},
	{0x0203, 0x12},
	{0x0204, 0x00},
	{0x0205, 0x80},
	{0x0306, 0x00},
	{0x0307, 0x6b},
	{0x30F1, 0x70},
/*MIPI Size Setting*/
	{0x30A9, 0x01},
	{0x300E, 0xE9},
	{0x0387, 0x01},
	{0x0344, 0x03},
	{0x0345, 0x38},
	{0x0348, 0x06},
	{0x0349, 0xf7},
	{0x0346, 0x01},
	{0x0347, 0xb8},
	{0x034A, 0x05},
	{0x034B, 0xef},
	{0x0380, 0x00},
	{0x0381, 0x01},
	{0x0382, 0x00},
	{0x0383, 0x01},
	{0x0384, 0x00},
	{0x0385, 0x01},
	{0x0386, 0x00},
	{0x0387, 0x01},
	{0x034C, 0x03},
	{0x034D, 0xc0},
	{0x034E, 0x04},
	{0x034F, 0x38},
	{0x30BF, 0xAB},
	{0x30C0, 0xc0},
	{0x30C8, 0x04},
	{0x30C9, 0xb0},
};

struct qs_s5k4e1_i2c_reg_conf qs_s5k4e1_prev_settings_2d[] = {
	{0x0100, 0x00},
	{0x0340, 0x03},
	{0x0341, 0xe0},
	{0x0342, 0x0A},
	{0x0343, 0xB2},
	{0x3030, 0x06},
	{0x301B, 0x83},
	{0x30BC, 0x98},
	{0x301C, 0x04},
	{0x0202, 0x01},
	{0x0203, 0xFD},
	{0x0204, 0x00},
	{0x0205, 0x80},
	{0x0306, 0x00},
	{0x0307, 0x64},
	{0x30F1, 0xa0},
	{0x30A9, 0x02},
	{0x300E, 0xEB},
	{0x0387, 0x03},
	{0x0344, 0x00},
	{0x0345, 0x00},
	{0x0348, 0x0A},
	{0x0349, 0x2F},
	{0x0346, 0x00},
	{0x0347, 0x00},
	{0x034A, 0x07},
	{0x034B, 0xA7},
	{0x0380, 0x00},
	{0x0381, 0x01},
	{0x0382, 0x00},
	{0x0383, 0x01},
	{0x0384, 0x00},
	{0x0385, 0x01},
	{0x0386, 0x00},
	{0x0387, 0x03},
	{0x034C, 0x05},
	{0x034D, 0x10},
	{0x034E, 0x03},
	{0x034F, 0xd4},
	{0x30BF, 0xAB},
	{0x30C0, 0xc0},
	{0x30C8, 0x06},
	{0x30C9, 0x54},
};

struct qs_s5k4e1_i2c_reg_conf qs_s5k4e1_snap_settings_2d[] = {
	{0x0100, 0x00},
	{0x0340, 0x07},
	{0x0341, 0xB4},
	{0x0342, 0x0A},
	{0x0343, 0xB2},
	{0x3030, 0x06}, /*shut streaming off*/
	{0x300E, 0xE8},
	{0x301B, 0x75},
	{0x301C, 0x04},
	{0x30BC, 0x98},
	{0x0202, 0x04},
	{0x0203, 0x12},
	{0x0204, 0x00},
	{0x0205, 0x80},
	{0x0306, 0x00},
	{0x0307, 0x64},
	{0x30F1, 0xa0},
	{0x30A9, 0x03},/*Horizontal Binning Off*/
	{0x300E, 0xE8},/*Vertical Binning Off*/
	{0x0387, 0x01},/*y_odd_inc*/
	{0x034C, 0x0A},/*x_output size*/
	{0x034D, 0x30},
	{0x034E, 0x07},/*y_output size*/
	{0x034F, 0xA8},
	{0x30BF, 0xAB},/*outif_enable[7], data_type[5:0](2Bh = bayer 10bit)*/
	{0x30C0, 0x86},/*video_offset[7:4] 3260%12*/
	{0x30C8, 0x0C},/*video_data_length 3260 = 2608 * 1.25*/
	{0x30C9, 0xBC},

};

struct qs_s5k4e1_i2c_reg_conf qs_s5k4e1_snap_settings_3d[] = {
	{0x0100, 0x00},

/* Frame Length*/
	{0x0340, 0x04},
	{0x0341, 0xB4},
/* Line Length*/
	{0x0342, 0x0A},
	{0x0343, 0xB2},
	{0x3030, 0x06},/*shut streaming off*/
/*Analog Setting*/
	{0x301B, 0x75},
	{0x30BC, 0xB0},
	{0x301C, 0x04},
/*Integration setting ... */
	{0x0202, 0x04},
	{0x0203, 0x12},
	{0x0204, 0x00},
	{0x0205, 0x80},
/*PLL setting ...*/
	{0x0306, 0x00},
	{0x0307, 0x6b},
	{0x30F1, 0x70},
/*MIPI Size Setting*/
	{0x30A9, 0x01},
	{0x300E, 0xE9},
	{0x0387, 0x01},
	{0x0344, 0x01},/*x_addr_start*/
	{0x0345, 0x1C},
	{0x0348, 0x08},/*x_addr_end*/
	{0x0349, 0xEB},
	{0x0346, 0x01},/*y_addr_start*/
	{0x0347, 0x80},
	{0x034A, 0x06},/*y_addr_end*/
	{0x034B, 0x27},
	{0x0380, 0x00},/*x_even_inc 1*/
	{0x0381, 0x01},
	{0x0382, 0x00},/*x_odd_inc 1*/
	{0x0383, 0x01},
	{0x0384, 0x00},/*y_even_inc 1*/
	{0x0385, 0x01},
	{0x0386, 0x00},/*y_odd_inc 1*/
	{0x0387, 0x01},
	{0x034C, 0x07},/*x_output size*/
	{0x034D, 0xD0},
	{0x034E, 0x04},/*y_output size*/
	{0x034F, 0xA8},
	{0x30BF, 0xAB},/*outif_enable[7], data_type[5:0](2Bh = bayer 10bit)*/
	{0x30C0, 0x84},/*video_offset[7:4] 3260%12*/
	{0x30C8, 0x09},/*video_data_length 3260 = 2608 * 1.25*/
	{0x30C9, 0xC4},

};

struct qs_s5k4e1_i2c_reg_conf qs_s5k4e1_recommend_settings[] = {
	{0x0100, 0x00},

	{0x3030, 0x06},/*shut streaming*/
/*Analog Setting*/
	{0x3000, 0x05},
	{0x3001, 0x03},
	{0x3002, 0x08},
	{0x3003, 0x09},
	{0x3004, 0x2E},
	{0x3005, 0x06},
	{0x3006, 0x34},
	{0x3007, 0x00},
	{0x3008, 0x3C},
	{0x3009, 0x3C},
	{0x300A, 0x28},
	{0x300B, 0x04},
	{0x300C, 0x0A},
	{0x300D, 0x02},
	{0x300F, 0x82},
	{0x3010, 0x00},
	{0x3011, 0x4C},
	{0x3012, 0x30},
	{0x3013, 0xC0},
	{0x3014, 0x00},
	{0x3015, 0x00},
	{0x3016, 0x2C},
	{0x3017, 0x94},
	{0x3018, 0x78},
	{0x301D, 0xD4},
	{0x3021, 0x02},
	{0x3022, 0x24},
	{0x3024, 0x40},
	{0x3027, 0x08},
	{0x3029, 0xC6},
	{0x302B, 0x01},
	{0x30D8, 0x3F},
/* ADLC setting ...*/
	{0x3070, 0x5F},
	{0x3071, 0x00},
	{0x3080, 0x04},
	{0x3081, 0x38},

/*MIPI setting*/
	{0x30BD, 0x00},/*SEL_CCP[0]*/
	{0x3084, 0x15},/*SYNC Mode*/
	{0x30BE, 0x1A},/*M_PCLKDIV_AUTO[4], M_DIV_PCLK[3:0]*/
	{0x30C1, 0x01},/*pack video enable [0]*/
	{0x30EE, 0x02},/*DPHY enable [1]*/
	{0x3111, 0x86},/*Embedded data off [5]*/
/*For MIPI T8 T9*/
	{0x30E3, 0x38},
	{0x30E4, 0x40},
	{0x3113, 0x70},
	{0x3114, 0x80},
	{0x3115, 0x7B},
	{0x3116, 0xC0},
	{0x30EE, 0x12},

/*PLL setting ...*/
	{0x0305, 0x06},
	{0x30B5, 0x01},
	{0x30E2, 0x02},/*num lanes[1:0] = 1*/

};

const struct
qs_s5k4e1_i2c_reg_conf qs_s5k4e1_lenshading_settings[4][LENS_SHADE_TABLE] = {
	{/*2D Preview*/
		{0x3097, 0x52},/*sh4ch_blk_width = 82*/
		{0x3098, 0x3e},/*sh4ch_blk_height = 62*/
		{0x3099, 0x03},/*sh4ch_step_x msb (sh4ch_step_x = 799)*/
		{0x309a, 0x1f},/*sh4ch_step_x lsb*/
		{0x309b, 0x04},/*sh4ch_step_y msb (sh4ch_step_y = 1057)*/
		{0x309c, 0x21},/*sh4ch_step_y lsb*/
		{0x309d, 0x00},/*sh4ch_start_blk_cnt_x = 0*/
		{0x309e, 0x00},/*sh4ch_start_int_cnt_x = 0*/
		{0x309f, 0x00},/*sh4ch_start_frac_cnt_x msb (0)*/
		{0x30a0, 0x00},/*sh4ch_start_frac_cnt_x lsb*/
		{0x30a1, 0x00},/*sh4ch_start_blk_cnt_y = 0*/
		{0x30a2, 0x00},/*sh4ch_start_int_cnt_y = 0*/
		{0x30a3, 0x00},/*sh4ch_start_frac_cnt_y msb (0)*/
		{0x30a4, 0x00},/*sh4ch_start_frac_cnt_y lsb*/
		{0x30a5, 0x01},
		{0x30a6, 0x00},/*gs_pedestal	= 64*/
	},
	{/*2D Snapshot*/
		{0x3097, 0x52},/*sh4ch_blk_width = 82*/
		{0x3098, 0x7b},/*sh4ch_blk_height = 123*/
		{0x3099, 0x03},/*sh4ch_step_x msb (sh4ch_step_x = 799)*/
		{0x309a, 0x1f},/*sh4ch_step_x lsb*/
		{0x309b, 0x02},/*sh4ch_step_y msb (sh4ch_step_y = 533)*/
		{0x309c, 0x15},/*sh4ch_step_y lsb*/
		{0x309d, 0x00},/*sh4ch_start_blk_cnt_x = 0*/
		{0x309e, 0x00},/*sh4ch_start_int_cnt_x = 0*/
		{0x309f, 0x00},/*sh4ch_start_frac_cnt_x msb (0)*/
		{0x30a0, 0x00},/*sh4ch_start_frac_cnt_x lsb*/
		{0x30a1, 0x00},/*sh4ch_start_blk_cnt_y = 0*/
		{0x30a2, 0x00},/*sh4ch_start_int_cnt_y = 0*/
		{0x30a3, 0x00},/*sh4ch_start_frac_cnt_y msb (0)*/
		{0x30a4, 0x00},/*sh4ch_start_frac_cnt_y lsb*/
		{0x30a5, 0x01},
		{0x30a6, 0x00},/*gs_pedestal	= 64*/
	},

	{/*3D Preview*/
		{0x3097, 0x52},/*sh4ch_blk_width = 82*/
		{0x3098, 0x7b},/*sh4ch_blk_height = 123*/
		{0x3099, 0x03},/*sh4ch_step_x msb (sh4ch_step_x = 799)*/
		{0x309a, 0x1f},/*sh4ch_step_x lsb*/
		{0x309b, 0x02},/*sh4ch_step_y msb (sh4ch_step_y = 533)*/
		{0x309c, 0x15},/*sh4ch_step_y lsb*/
		{0x309d, 0x02},/*sh4ch_start_blk_cnt_x = 2*/
		{0x309e, 0x05},/*sh4ch_start_int_cnt_x = 5*/
		{0x309f, 0x06},/*sh4ch_start_frac_cnt_x msb (1598)*/
		{0x30a0, 0x3e},/*sh4ch_start_frac_cnt_x lsb*/
		{0x30a1, 0x47},/*sh4ch_start_blk_cnt_y = 71*/
		{0x30a2, 0x03},/*sh4ch_start_int_cnt_y = 3*/
		{0x30a3, 0x93},/*sh4ch_start_frac_cnt_y msb (1598)*/
		{0x30a4, 0xd3},/*sh4ch_start_frac_cnt_y lsb*/
		{0x30a5, 0x01},
		{0x30a6, 0x00},/*gs_pedestal	= 64*/
	},

	{/*3D Snapshot*/
		{0x3097, 0x52},/*sh4ch_blk_width = 82*/
		{0x3098, 0x7b},/*sh4ch_blk_height = 123*/
		{0x3099, 0x03},/*sh4ch_step_x msb (sh4ch_step_x = 799)*/
		{0x309a, 0x1f},/*sh4ch_step_x lsb*/
		{0x309b, 0x02},/*sh4ch_step_y msb (sh4ch_step_y = 533)*/
		{0x309c, 0x15},/*sh4ch_step_y lsb*/
		{0x309d, 0x3c},/*sh4ch_start_blk_cnt_x = 60*/
		{0x309e, 0x01},/*sh4ch_start_int_cnt_x = 1*/
		{0x309f, 0xbb},/*sh4ch_start_frac_cnt_x msb (47940)*/
		{0x30a0, 0x44},/*sh4ch_start_frac_cnt_x lsb*/
		{0x30a1, 0x0f},/*sh4ch_start_blk_cnt_y = 15*/
		{0x30a2, 0x03},/*sh4ch_start_int_cnt_y = 3*/
		{0x30a3, 0x1f},/*sh4ch_start_frac_cnt_y msb (47940)*/
		{0x30a4, 0x3b},/*sh4ch_start_frac_cnt_y lsb*/
		{0x30a5, 0x01},
		{0x30a6, 0x00},/*gs_pedestal	= 64*/
	},

};


struct qs_s5k4e1_i2c_conf_array qs_s5k4e1_confs[] = {
	{&qs_s5k4e1_prev_settings_2d[0], \
		ARRAY_SIZE(qs_s5k4e1_prev_settings_2d)},
	{&qs_s5k4e1_snap_settings_2d[0], \
		ARRAY_SIZE(qs_s5k4e1_snap_settings_2d)},
	{&qs_s5k4e1_prev_settings_3d[0], \
		ARRAY_SIZE(qs_s5k4e1_prev_settings_3d)},
	{&qs_s5k4e1_snap_settings_3d[0], \
		ARRAY_SIZE(qs_s5k4e1_snap_settings_3d)},
};
struct qs_s5k4e1_reg qs_s5k4e1_regs = {
	.rec_settings = &qs_s5k4e1_recommend_settings[0],
	.rec_size = ARRAY_SIZE(qs_s5k4e1_recommend_settings),
	.reg_lens = &qs_s5k4e1_lenshading_settings[0],
	.reg_lens_size = ARRAY_SIZE(qs_s5k4e1_lenshading_settings[0]),
	.conf_array = &qs_s5k4e1_confs[0],
};
